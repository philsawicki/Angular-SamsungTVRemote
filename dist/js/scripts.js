"use strict";angular.module("smartTVRemote.Controllers",[]),angular.module("smartTVRemote.Directives",[]),angular.module("smartTVRemote.Filters",[]),angular.module("smartTVRemote.Providers",[]),angular.module("smartTVRemote.Services",[]),angular.module("smartTVRemote",["ngRoute","ngAnimate","smartTVRemote.Controllers","smartTVRemote.Directives","smartTVRemote.Services","smartTVRemote.Providers","smartTVRemote.Filters"]).config(["$routeProvider",function(e){e.when("/",{templateUrl:"views/page-home.html",controller:"HomePageController"}).when("/about",{templateUrl:"views/page-about.html",controller:"AboutPageController"}).when("/discovery",{templateUrl:"views/page-discovery.html",controller:"DiscoveryPageController"}).otherwise({redirectTo:"/"})}]).config(["$compileProvider",function(e){var n=-1!==window.location.href.indexOf("http://localhost:8000/app");e.debugInfoEnabled(!n)}]).config(function(){String.prototype.format||(String.prototype.format=function(){var e=arguments;return this.replace(/{(\d+)}/g,function(n,r){return"undefined"!=typeof e[r]?e[r]:n})})}).run(["$window","$rootScope",function(e,n){var r=!0;navigator&&navigator.onLine&&(r=navigator.onLine),n.$apply(function(){n.applicationIsOnline=r}),e.addEventListener?(e.addEventListener("online",function(){n.$apply(function(){n.applicationIsOnline=!0})},!1),e.addEventListener("offline",function(){n.$apply(function(){n.applicationIsOnline=!1})},!1)):(document.body.ononline=function(){n.$apply(function(){n.applicationIsOnline=!0})},document.body.onoffline=function(){n.$apply(function(){n.applicationIsOnline=!1})})}]),angular.module("smartTVRemote.Controllers").controller("AboutPageController",["$scope",function(){}]),angular.module("smartTVRemote.Controllers").controller("DiscoveryPageController",["$scope","discoveryService",function(e,n){var r=n.getConnectedSamsungSmartTVs();r.then(function(n){e.tvDevices=n},function(e){console.error(e)});var o=n.getConnectedDevices();o.then(function(n){e.devices=n},function(e){console.error(e)})}]),angular.module("smartTVRemote.Controllers").controller("HomePageController",["$scope",function(){}]),angular.module("smartTVRemote.Controllers").controller("RouteController",["$scope","$route","$location",function(e,n){e.$on("$routeChangeSuccess",function(){e.controller=n.current.controller})}]),angular.module("smartTVRemote.Directives").directive("navigationBar",function(){return{restrict:"E",templateUrl:"views/partial-navigationBar.html",controller:"RouteController"}}),angular.module("smartTVRemote.Providers").provider("appConfig",function(){var e="AngularSamsungTVRemote_localStorage_",n={JSONPTimeout:1e4,StorageKeys:{StoredQuotes:e+"storedQuotes",StoredStockListField:e+"storedStockListSortingField",StoredStockListOrder:e+"storedStockListSortingDirection"}};return{set:function(e,r){n[e]=r},$get:function(){return n}}}),angular.module("smartTVRemote.Providers").provider("errorMessages",function(){var e={NoData:{Error:"NoData",Message:"No data received"},Timeout:{Error:"Timeout",Message:"Request took longer than {0}ms"},YQL:{Error:"YQLError",Message:'Check "data" for details'}};return{set:function(n,r){e[n]=r},$get:function(){return e}}}),angular.module("smartTVRemote.Services").factory("applicationStorageService",["$window","appConfig","storageService",function(e,n,r){var o={},t=function(e){return o[e]},a=function(e,n){o[e]=n},s=function(){var e=n.StorageKeys.StoredQuotes,o=t(e);if(o)return o;var a=angular.fromJson(r.getData(e));return a},l=function(e){var o=n.StorageKeys.StoredQuotes;a(o,e);var t=angular.toJson(e);r.setData(o,t)},i=function(){var e=n.StorageKeys.StoredStockListField,o=t(e);if(o)return o;var a=r.getData(e);return a},c=function(e){var o=n.StorageKeys.StoredStockListField;a(o,e),r.setData(o,e)},d=function(){var e=n.StorageKeys.StoredStockListOrder,o=t(e);if(o)return o;var a=r.getData(e);return"true"===a||1===a?!0:!1},u=function(e){var o=n.StorageKeys.StoredStockListOrder,t=JSON.parse(e);a(o,t),r.setData(o,t)};return{getSavedStockSymbols:s,setSavedStocks:l,getStockListSortingField:i,setStockListSortingField:c,getStockListSortingDirection:d,setStockListSortingDirection:u}}]),angular.module("smartTVRemote.Services").factory("discoveryService",["$q","$http","$timeout","appConfig","errorMessages",function(e,n,r,o,t){var a=function(){var a=e.defer(),s=e.defer(),l=!1,i=void 0,c="//localhost:8080/api/tv/discovery";return n.get(c,{timeout:s.promise}).success(function(e){if(0===e.length)a.reject({error:t.NoData.Error,message:t.NoData.Message});else for(var n=0,o=e.length;o>n;n++){var l=e[n];l.headersFormatted=l.headers.split(String.fromCharCode(13,10))}r.cancel(i),s.reject(),a.resolve(e)}).error(function(e){a.reject(l?{error:t.Timeout.Error,message:t.Timeout.Message.format(o.JSONPTimeout),data:e}:e)}),i=r(function(){l=!0,s.resolve()},o.JSONPTimeout),a.promise},s=function(){var a=e.defer(),s=e.defer(),l=!1,i=void 0,c="//localhost:8080/api/discovery/all";return n.get(c,{timeout:s.promise}).success(function(e){if(0===e.length)a.reject({error:t.NoData.Error,message:t.NoData.Message});else for(var n=0,o=e.length;o>n;n++){var l=e[n];l.headersFormatted=l.headers.split(String.fromCharCode(13,10))}r.cancel(i),s.reject(),a.resolve(e)}).error(function(e){a.reject(l?{error:t.Timeout.Error,message:t.Timeout.Message.format(o.JSONPTimeout),data:e}:e)}),i=r(function(){l=!0,s.resolve()},o.JSONPTimeout),a.promise};return{getConnectedSamsungSmartTVs:a,getConnectedDevices:s}}]),angular.module("smartTVRemote.Services").factory("storageService",["$window",function(e){var n=function(n,r){var o=e.localStorage;o&&o.setItem(n,r)},r=function(n){var r=e.localStorage;return r?r.getItem(n):void 0},o=function(n){var r=e.localStorage;r&&r.removeItem(n)},t=function(){var n=e.localStorage;n&&n.clear()};return{setData:n,getData:r,deleteData:o,deleteAllData:t}}]),angular.module("smartTVRemote").run(["$templateCache",function(e){e.put("views/index.html",'<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1"><meta name="description" content><meta name="author" content><link rel="icon" href="http://getbootstrap.com/favicon.ico"><title>SmartTV Web Remote Demo</title><link rel="stylesheet" type="text/css" href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.2/css/bootstrap.min.css"><link rel="stylesheet" type="text/css" href="//getbootstrap.com/examples/jumbotron/jumbotron.css"><style type="text/css">\n    	#successInfobox,\n    	#errorInfobox {\n    		display: none;\n    	}\n    </style><script src="//getbootstrap.com/assets/js/ie-emulation-modes-warning.js"></script></head><body><nav class="navbar navbar-inverse navbar-fixed-top"><div class="container"><div class="navbar-header"><button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar"><span class="sr-only">Toggle navigation</span> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span></button> <a class="navbar-brand" href="#">SmartTV Web Remote</a></div></div></nav><div class="jumbotron"><div class="container"><h1>SmartTV Web Remote</h1><p>This is a (crude) demo to showcase the ability to control a SmartTV through a simple web interface.</p><p><a class="btn btn-primary btn-lg" href="https://github.com/philsawicki/Angular-SamsungTVRemote" role="button">Learn more &raquo;</a></p></div></div><div class="container"><div class="row text-center"><div class="col-md-3"><h2>Volume Up</h2><p>Or &uparrow; on keyboard</p><p><a class="btn btn-primary" href="javascript:;" role="button" id="volumeUp">Volume Up &raquo;</a></p></div><div class="col-md-3"><h2>Volume Down</h2><p>Or &downarrow; on keyboard</p><p><a class="btn btn-primary" href="javascript:;" role="button" id="volumeDown">Volume Down &raquo;</a></p></div><div class="col-md-3"><h2>Channel Up</h2><p>Or &rightarrow; on keyboard</p><p><a class="btn btn-primary" href="javascript:;" role="button" id="channelUp">Channel Up &raquo;</a></p></div><div class="col-md-3"><h2>Channel Down</h2><p>Or &leftarrow; on keyboard</p><p><a class="btn btn-primary" href="javascript:;" role="button" id="channelDown">Channel Down &raquo;</a></p></div></div><div id="successInfobox" class="alert alert-success alert-dismissible" role="alert"><button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button> <strong>Success!</strong> <span class="message"></span></div><div id="errorInfobox" class="alert alert-danger alert-dismissible" role="alert"><button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button> <strong>Warning!</strong> <span class="message"></span></div><hr><footer><p>&copy; <a href="http://philippesawicki.com" rel="me">Philippe Sawicki</a> 2014-2015</p></footer></div><script src="//ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script><script src="//maxcdn.bootstrapcdn.com/bootstrap/3.3.2/js/bootstrap.min.js"></script><script src="//getbootstrap.com/assets/js/ie10-viewport-bug-workaround.js"></script><script type="text/javascript">\n		jQuery(document).ready(function ($) {\n			var successInfobox = $(\'#successInfobox\'),\n			    errorInfobox = $(\'#errorInfobox\');\n\n			/**\n			 * Mediator to wrap actions between the Web Interface and the SmartTV.\n			 * @type {Object}\n			 */\n			var remoteMediator = {\n				execute: function (options) {\n					options.url = options.url || \'/api/tv/KEY_VOLDOWN\';\n					options.elementToDisable = options.elementToDisable || \'\';\n\n					$(options.elementToDisable).prop(\'disabled\', true);\n\n					$.ajax({\n						url: options.url,\n						success: function (data) {\n							if (data.success) {\n								successInfobox.find(\'.message\').text(data.message);\n								successInfobox.show();\n								errorInfobox.hide();\n\n								console.log(data);\n							} else {\n								errorInfobox.find(\'.message\').text(data.errorMessage);\n								errorInfobox.show();\n								successInfobox.hide();\n\n								console.error(data.errorMessage);\n							}\n\n							$(options.elementToDisable).prop(\'disabled\', false);\n						},\n						error: function (err) {\n							errorInfobox.find(\'.message\').text( JSON.stringify(err) );\n							errorInfobox.show();\n							successInfobox.hide();\n\n							console.error(err);\n							$(options.elementToDisable).prop(\'disabled\', false);\n						}\n					})\n				}\n			};\n\n			/**\n			 * Actions to execute on the remote.\n			 * @type {Object}\n			 */\n			var remoteActions = {\n				/**\n				 * Extremely basic handler for the "Volume Up" button.\n				 * @return {void}\n				 */\n				volumeUpCallback: function () {\n					remoteMediator.execute({\n						url: \'/api/tv/command/KEY_VOLUP\',\n						elementToDisable: \'#volumeUp\'\n					});\n				},\n\n				/**\n				 * Extremely basic handler for the "Volume Down" button.\n				 * @return {void}\n				 */\n				volumeDownCallback: function () {\n					remoteMediator.execute({\n						url: \'/api/tv/command/KEY_VOLDOWN\',\n						elementToDisable: \'#volumeDown\'\n					});\n				},\n\n				/**\n				 * Extremely basic handler for the "Channel Up" button.\n				 * @return {void}\n				 */\n				channelUpCallback: function () {\n					remoteMediator.execute({\n						url: \'/api/tv/command/KEY_CHUP\',\n						elementToDisable: \'#channelUp\'\n					});\n				},\n\n				/**\n				 * Extremely basic handler for the "Channel Down" button.\n				 * @return {void}\n				 */\n				channelDownCallback: function () {\n					remoteMediator.execute({\n						url: \'/api/tv/command/KEY_CHDOWN\',\n						elementToDisable: \'#channelDown\'\n					});\n				}\n			};\n\n\n			// Register callbacks for CTA button clicks:\n			$(\'#volumeUp\').on(\'click\', remoteActions.volumeUpCallback);\n			$(\'#volumeDown\').on(\'click\', remoteActions.volumeDownCallback);\n			$(\'#channelUp\').on(\'click\', remoteActions.channelUpCallback);\n			$(\'#channelDown\').on(\'click\', remoteActions.channelDownCallback);\n\n			// Register callbacks for keypress events:\n			$(\'html\').keydown(function (event) {\n				switch (event.keyCode) {\n					// Up arrow:\n					case 38:\n						remoteActions.volumeUpCallback();\n						break;\n\n					// Down arrow:\n					case 40:\n						remoteActions.volumeDownCallback();\n						break;\n\n					// Left arrow:\n					case 37:\n						remoteActions.channelDownCallback();\n						break;\n\n					// Right arrow:\n					case 39:\n						remoteActions.channelUpCallback();\n						break;\n				}\n			});\n		});\n	</script></body></html>'),e.put("views/page-about.html","<h1>About</h1><div>About Page for <em>SmartTV Remote</em></div>"),e.put("views/page-discovery.html",'<h1>Discovery</h1><div>Discovery Page for <em>SmartTV Remote</em></div><div class="page-header"><h2><span class="glyphicon glyphicon-film"></span> Connected TVs</h2></div><table class="table table-striped"><thead><tr><th>#</th><th>Headers</th></tr></thead><tbody><tr ng-repeat="tvDevice in tvDevices"><th scope="row">{{ ::($index + 1) }}</th><td>{{ ::tvDevice.headers }}</td></tr></tbody></table><div class="page-header"><h2><span class="glyphicon glyphicon-transfer"></span> Connected Devices</h2></div><table class="table table-striped"><thead><tr><th>#</th><th>Headers</th></tr></thead><tbody><tr ng-repeat="device in devices"><th scope="row">{{ ::($index + 1) }}</th><td>{{ ::device.headers }}</td></tr></tbody></table>'),e.put("views/page-home.html",'<h1>Home</h1><div>Home Page for <em>SmartTV Remote</em></div><div class="page-header"><h2>TV Remote Demo</h2></div><div class="row text-center"><div class="col-md-3"><h2>Volume Up</h2><p>Or &uparrow; on keyboard</p><p><a class="btn btn-primary" href="javascript:;" role="button" id="volumeUp">Volume Up &raquo;</a></p></div><div class="col-md-3"><h2>Volume Down</h2><p>Or &downarrow; on keyboard</p><p><a class="btn btn-primary" href="javascript:;" role="button" id="volumeDown">Volume Down &raquo;</a></p></div><div class="col-md-3"><h2>Channel Up</h2><p>Or &rightarrow; on keyboard</p><p><a class="btn btn-primary" href="javascript:;" role="button" id="channelUp">Channel Up &raquo;</a></p></div><div class="col-md-3"><h2>Channel Down</h2><p>Or &leftarrow; on keyboard</p><p><a class="btn btn-primary" href="javascript:;" role="button" id="channelDown">Channel Down &raquo;</a></p></div></div><div id="successInfobox" class="alert alert-success alert-dismissible" role="alert"><button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button> <strong>Success!</strong> <span class="message"></span></div><div id="errorInfobox" class="alert alert-danger alert-dismissible" role="alert"><button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button> <strong>Warning!</strong> <span class="message"></span></div><script type="text/javascript">\r\n		jQuery(document).ready(function ($) {\r\n			var successInfobox = $(\'#successInfobox\'),\r\n			    errorInfobox = $(\'#errorInfobox\');\r\n\r\n			/**\r\n			 * Mediator to wrap actions between the Web Interface and the SmartTV.\r\n			 * @type {Object}\r\n			 */\r\n			var remoteMediator = {\r\n				execute: function (options) {\r\n					options.url = options.url || \'//localhost:8080/api/tv/KEY_VOLDOWN\';\r\n					options.elementToDisable = options.elementToDisable || \'\';\r\n\r\n					$(options.elementToDisable).prop(\'disabled\', true);\r\n\r\n					$.ajax({\r\n						url: options.url,\r\n						success: function (data) {\r\n							if (data.success) {\r\n								successInfobox.find(\'.message\').text(data.message);\r\n								successInfobox.show();\r\n								errorInfobox.hide();\r\n\r\n								console.log(data);\r\n							} else {\r\n								errorInfobox.find(\'.message\').text(data.errorMessage);\r\n								errorInfobox.show();\r\n								successInfobox.hide();\r\n\r\n								console.error(data.errorMessage);\r\n							}\r\n\r\n							$(options.elementToDisable).prop(\'disabled\', false);\r\n						},\r\n						error: function (err) {\r\n							errorInfobox.find(\'.message\').text( JSON.stringify(err) );\r\n							errorInfobox.show();\r\n							successInfobox.hide();\r\n\r\n							console.error(err);\r\n							$(options.elementToDisable).prop(\'disabled\', false);\r\n						}\r\n					})\r\n				}\r\n			};\r\n\r\n			/**\r\n			 * Actions to execute on the remote.\r\n			 * @type {Object}\r\n			 */\r\n			var remoteActions = {\r\n				/**\r\n				 * Extremely basic handler for the "Volume Up" button.\r\n				 * @return {void}\r\n				 */\r\n				volumeUpCallback: function () {\r\n					remoteMediator.execute({\r\n						url: \'//localhost:8080/api/tv/command/KEY_VOLUP\',\r\n						elementToDisable: \'#volumeUp\'\r\n					});\r\n				},\r\n\r\n				/**\r\n				 * Extremely basic handler for the "Volume Down" button.\r\n				 * @return {void}\r\n				 */\r\n				volumeDownCallback: function () {\r\n					remoteMediator.execute({\r\n						url: \'//localhost:8080/api/tv/command/KEY_VOLDOWN\',\r\n						elementToDisable: \'#volumeDown\'\r\n					});\r\n				},\r\n\r\n				/**\r\n				 * Extremely basic handler for the "Channel Up" button.\r\n				 * @return {void}\r\n				 */\r\n				channelUpCallback: function () {\r\n					remoteMediator.execute({\r\n						url: \'//localhost:8080/api/tv/command/KEY_CHUP\',\r\n						elementToDisable: \'#channelUp\'\r\n					});\r\n				},\r\n\r\n				/**\r\n				 * Extremely basic handler for the "Channel Down" button.\r\n				 * @return {void}\r\n				 */\r\n				channelDownCallback: function () {\r\n					remoteMediator.execute({\r\n						url: \'//localhost:8080/api/tv/command/KEY_CHDOWN\',\r\n						elementToDisable: \'#channelDown\'\r\n					});\r\n				}\r\n			};\r\n\r\n\r\n			// Register callbacks for CTA button clicks:\r\n			$(\'#volumeUp\').on(\'click\', remoteActions.volumeUpCallback);\r\n			$(\'#volumeDown\').on(\'click\', remoteActions.volumeDownCallback);\r\n			$(\'#channelUp\').on(\'click\', remoteActions.channelUpCallback);\r\n			$(\'#channelDown\').on(\'click\', remoteActions.channelDownCallback);\r\n\r\n			// Register callbacks for keypress events:\r\n			$(\'html\').keydown(function (event) {\r\n				switch (event.keyCode) {\r\n					// Up arrow:\r\n					case 38:\r\n						remoteActions.volumeUpCallback();\r\n						break;\r\n\r\n					// Down arrow:\r\n					case 40:\r\n						remoteActions.volumeDownCallback();\r\n						break;\r\n\r\n					// Left arrow:\r\n					case 37:\r\n						remoteActions.channelDownCallback();\r\n						break;\r\n\r\n					// Right arrow:\r\n					case 39:\r\n						remoteActions.channelUpCallback();\r\n						break;\r\n				}\r\n			});\r\n		});\r\n	</script>'),e.put("views/partial-navigationBar.html",'<nav class="navbar navbar-inverse navbar-fixed-top" role="navigation"><div class="container"><div class="navbar-header"><button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar"><span class="sr-only">Toggle navigation</span> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span></button> <a class="navbar-brand" href="#/">SmartTV Remote</a></div><div id="navbar" class="navbar-collapse collapse"><ul class="nav navbar-nav"><li ng-class="{active: controller == \'HomePageController\'}"><a href="#/">Home</a></li><li ng-class="{active: controller == \'DiscoveryPageController\'}"><a href="#/discovery">Discovery</a></li><li ng-class="{active: controller == \'AboutPageController\'}"><a href="#/about">About</a></li><li class="disabled"><a href="#contact">Contact</a></li><li class="dropdown disabled"><a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">Dropdown <span class="caret"></span></a><ul class="dropdown-menu" role="menu"><li><a href="#">Action</a></li><li><a href="#">Another action</a></li><li><a href="#">Something else here</a></li><li class="divider"></li><li class="dropdown-header">Nav header</li><li><a href="#">Separated link</a></li><li><a href="#">One more separated link</a></li></ul></li></ul></div></div></nav>')}]);